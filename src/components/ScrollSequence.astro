---
// src/components/ScrollSequence.astro
---

<section class="scroll-sequence-container min-h-screen relative">
  <div
    class="animated-text-container h-screen w-full flex items-center justify-center bg-slate-900 text-white relative"
  >
    <h2
      class="animated-text text-2xl md:text-6xl w-full font-bold max-w-4xl text-center"
    >
      Event je komplexná časovo ohraničená kampaň figurujúca výhradne pod vašou
      značkou, ktorá
    </h2>
  </div>

  <div
    class="homepage-panel absolute bottom-0 left-0 w-full h-0 bg-[#4F26E8] flex flex-col items-center justify-center overflow-hidden"
  >
    <div
      class="absolute top-8 right-8 w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center"
    >
      <span class="text-slate-900 font-bold text-2xl">01</span>
    </div>
    <h1
      class="text-white text-5xl md:text-8xl lg:text-9xl font-extrabold uppercase"
    >
      Homepage
    </h1>
    <p class="text-white/80 text-xl mt-4">Prvý dojem, ktorý zanechá stopu.</p>
  </div>
</section>

<style>
  .animated-text .word {
    display: inline-flex;
    /* Toto zabezpečí, že sa slovo nikdy nerozdelí, ale môže sa zalomiť medzera za ním */
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import SplitType from "split-type";

  gsap.registerPlugin(ScrollTrigger);

  const tl = gsap.timeline({
    scrollTrigger: {
      trigger: ".scroll-sequence-container",
      pin: true,
      scrub: 1,
      end: "+=4000", // Upravil som dĺžku pre plynulejší zážitok
    },
  });

  // Rozdelíme text na písmená
  const animatedText = new SplitType(".animated-text", {
    types: "words,chars",
  });

  // === NOVÁ ANIMÁCIA: Elegantné Zväčšenie a Rozostrenie ===

  // 1. Zobrazenie textu
  tl.from(animatedText.chars, {
    opacity: 0,
    scale: 0.5, // Písmená začnú na polovičnej veľkosti a dorastú
    filter: "blur(10px)", // Začnú rozostrené a zaostria sa
    stagger: 0.05, // Postupne po písmenách
    ease: "power2.out",
  });

  // 2. Pauza - text zostane chvíľu čitateľný
  tl.to({}, { duration: 1.5 });

  // 3. Skrytie textu
  tl.to(animatedText.chars, {
    opacity: 0,
    filter: "blur(10px)", // Opäť sa rozostria
    stagger: 0.0, // Postupne sa strácajú
    ease: "power2.in",
  });

  // Zvyšok animácie pre "Homepage" panel zostáva rovnaký
  tl.to(".homepage-panel", {
    height: "100vh",
    duration: 2,
    ease: "power2.inOut",
  });
  tl.to({}, { duration: 1 });
  tl.to(".homepage-panel", {
    opacity: 0,
    duration: 1.5,
    ease: "power2.inOut",
  });
</script>
